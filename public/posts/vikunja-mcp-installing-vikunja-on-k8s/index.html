<!doctype html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>Deploying Vikunja on a k3s Cluster as an Example of Planning and Writing Out a Helm Chart // Industrial Strength DevOps</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.147.5">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Gil Blinov" />
    <meta name="description" content="Learn how to write a Helm chart by learning how I deployed Vikunja on my k3s cluster." />
    <link rel="stylesheet" href="/css/main.min.3a28eb2c4551ce22952fd498b90b233c8d03325e908161354539cb80221ddd53.css" />
    

    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q957J4XNNH"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-Q957J4XNNH');
        }
      </script>
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Deploying Vikunja on a k3s Cluster as an Example of Planning and Writing Out a Helm Chart">
  <meta name="twitter:description" content="Learn how to write a Helm chart by learning how I deployed Vikunja on my k3s cluster.">

    <meta property="og:url" content="http://localhost:1313/posts/vikunja-mcp-installing-vikunja-on-k8s/">
  <meta property="og:site_name" content="Industrial Strength DevOps">
  <meta property="og:title" content="Deploying Vikunja on a k3s Cluster as an Example of Planning and Writing Out a Helm Chart">
  <meta property="og:description" content="Learn how to write a Helm chart by learning how I deployed Vikunja on my k3s cluster.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-06-01T00:00:00+00:00">
    <meta property="article:tag" content="Helm">
    <meta property="article:tag" content="Cd">
    <meta property="article:tag" content="Vikunja-Mcp">


  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="/avatar.jpg" alt="Gil Blinov" /></a>
      <span class="app-header-title">Industrial Strength DevOps</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/about/">About</a>
             | 
          
          <a class="app-header-menu-item" href="/">Home</a>
      </nav>
      <p>An engineer&#39;s journey in an ever changing world</p>
      <div class="app-header-social">
        
          <a href="https://github.com/BelKirill" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-github" viewBox="0 0 24 24" fill="currentColor"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          </a>
        
          <a href="https://dev.to/gilblinov" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-devdotto" viewBox="0 0 24 24" fill="currentColor"><title>dev.to</title><path d="M7.42 10.05c-.18-.16-.46-.23-.84-.23H6l.02 2.44.04 2.45.56-.02c.41 0 .63-.07.83-.26.24-.24.26-.36.26-2.2 0-1.91-.02-1.96-.29-2.18zM0 4.94v14.12h24V4.94H0zM8.56 15.3c-.44.58-1.06.77-2.53.77H4.71V8.53h1.4c1.67 0 2.16.18 2.6.9.27.43.29.6.32 2.57.05 2.23-.02 2.73-.47 3.3zm5.09-5.47h-2.47v1.77h1.52v1.28l-.72.04-.75.03v1.77l1.22.03 1.2.04v1.28h-1.6c-1.53 0-1.6-.01-1.87-.3l-.3-.28v-3.16c0-3.02.01-3.18.25-3.48.23-.31.25-.31 1.88-.31h1.64v1.3zm4.68 5.45c-.17.43-.64.79-1 .79-.18 0-.45-.15-.67-.39-.32-.32-.45-.63-.82-2.08l-.9-3.39-.45-1.67h.76c.4 0 .75.02.75.05 0 .06 1.16 4.54 1.26 4.83.04.15.32-.7.73-2.3l.66-2.52.74-.04c.4-.02.73 0 .73.04 0 .14-1.67 6.38-1.8 6.68z"/></svg>
          </a>
        
          <a href="https://www.linkedin.com/in/gilblinov" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-linkedin" viewBox="0 0 24 24" fill="currentColor"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Deploying Vikunja on a k3s Cluster as an Example of Planning and Writing Out a Helm Chart</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Jun 1, 2025
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          7 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="/tags/helm/">Helm</a>
              <a class="tag" href="/tags/cd/">Cd</a>
              <a class="tag" href="/tags/vikunja-mcp/">Vikunja-Mcp</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="deploying-vikunja-on-a-k3s-cluster-a-practical-helm-chart-walkthrough">Deploying Vikunja on a k3s Cluster: A Practical Helm Chart Walkthrough</h1>
<p>In this post, I&rsquo;ll share how I set up Vikunja—a popular self-hosted task management application—on a brand new k3s cluster. This journey was more than just a deployment; it became an opportunity to craft a custom Helm chart from scratch. Whether you&rsquo;re a DevOps professional or simply looking to expand your Kubernetes knowledge, this guide is packed with clear step-by-step instructions and personal insights.</p>
<blockquote>
<p><strong>Note:</strong> This guide assumes you are familiar with Kubernetes basics and Helm installations.</p></blockquote>
<h2 id="1-setting-up-the-stage-documentation-and-planning">1. Setting Up the Stage: Documentation and Planning</h2>
<p>Before diving into code, I made sure all my documentation tabs were open. I reviewed the Vikunja environment variables, understanding what each setting controls. This groundwork was essential—it helped me document the parameters that would eventually live in a <code>values.yaml</code> file.</p>
<h3 id="preparing-the-values-file">Preparing the Values File</h3>
<p>I planned out the installation by creating a comprehensive <code>values.yaml</code> file. Here’s a breakdown of my planning process:</p>
<ul>
<li><strong>Feature Flags:</strong> Features like <code>persistence.enabled</code> were toggled to easily control aspects such as volume persistence.</li>
<li><strong>Components Considered:</strong>
<ul>
<li><strong>Ingress:</strong> Ensuring external access through Traefik, as k3s provides built-in support.</li>
<li><strong>Postgres DB:</strong> Configuring a Postgres deployment to serve as the backend database.</li>
<li><strong>Volume Mounts:</strong> Ensuring a persistent volume for attachments and user data.</li>
</ul>
</li>
</ul>
<p>I decided to store environment variables in a <strong>ConfigMap</strong> and sensitive data in <strong>Secrets</strong> for maximum security and clarity.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Default values for Vikunja.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">nameOverride</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">fullnameOverride</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">db</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">database</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">user</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tag</span>: <span style="color:#e6db74">&#34;15&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">port</span>: <span style="color:#ae81ff">5432</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">servicePort</span>: <span style="color:#ae81ff">5432</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">256Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">500m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1Gi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">persistence</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">size</span>: <span style="color:#ae81ff">20Gi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">vikunja</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host</span>: <span style="color:#ae81ff">host.domain</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>: 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">vikunja/vikunja</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Overrides the image tag whose default is the chart appVersion.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tag</span>: <span style="color:#e6db74">&#34;latest&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">port</span>: <span style="color:#ae81ff">3456</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">servicePort</span>: <span style="color:#ae81ff">3456</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>: {}
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">matchLabels</span>: {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">256Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">500m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1Gi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">persistence</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumeSize</span>: <span style="color:#ae81ff">10Gi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">config</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">timezone</span>: <span style="color:#e6db74">&#34;Asia/Jerusalem&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">registrationEnabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">smtp</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">host</span>: <span style="color:#ae81ff">smtp.host.com</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">port</span>: <span style="color:#ae81ff">587</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">user</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">fromEmail</span>: <span style="color:#ae81ff">vikunja@host.domain</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">skipTLS</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>&ldquo;Wait! You have secrets in the values file!&rdquo; - Valid point, but I always pull in the real values when templating the helm chart, this is out of scope for this tutorial.</p>
<h2 id="2-installing-prerequisites-cert-manager">2. Installing Prerequisites: Cert Manager</h2>
<p>Cert Manager is a must-have for the certificate management in our cluster, especially for securing our ingress with TLS. I deployed Cert Manager using its Helm chart with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm repo add jetstack https://charts.jetstack.io
</span></span><span style="display:flex;"><span>helm repo update
</span></span><span style="display:flex;"><span>helm install cert-manager jetstack/cert-manager --namespace cert-manager --create-namespace --set installCRDs<span style="color:#f92672">=</span>true
</span></span></code></pre></div><p>After the installation, I created a ClusterIssuer to automate certificate issuance:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">cert-manager.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterIssuer</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">letsencrypt-prod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">acme</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server</span>: <span style="color:#ae81ff">https://acme-v02.api.letsencrypt.org/directory</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">email</span>: <span style="color:#ae81ff">youremail@example.com</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">privateKeySecretRef</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">letsencrypt-prod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">solvers</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">http01</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">class</span>: <span style="color:#ae81ff">traefik</span>
</span></span></code></pre></div><blockquote>
<p><strong>Tip:</strong> Always validate that your cert-manager installation is operational by checking its pods and logs.</p></blockquote>
<h2 id="3-developing-the-helm-chart-iteratively">3. Developing the Helm Chart Iteratively</h2>
<p>I approached Helm development methodically: write, lint, template, and test.</p>
<h3 id="step-by-step-approach">Step-by-Step Approach</h3>
<h4 id="a-define-the-postgres-statefulset-and-service">a. Define the Postgres StatefulSet and Service</h4>
<p>I began by coding the Postgres resources. Using a StatefulSet was key to ensuring data persistence and stable network identities.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># templates/postgres/statefulset.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">StatefulSet</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">serviceName</span>: <span style="color:#e6db74">&#34;vikunja-postgres&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#e6db74">&#34;{{ .Values.db.image.repository }}:{{ .Values.db.image.tag }}&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: {{ <span style="color:#ae81ff">.Values.db.port }}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">POSTGRES_DB</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">.Values.db.database | quote }}</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">POSTGRES_USER</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">.Values.db.user | quote }}</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">POSTGRES_PASSWORD</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">valueFrom</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">secretKeyRef</span>:
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-secret</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">key</span>: <span style="color:#ae81ff">VIKUNJA_DATABASE_PASSWORD</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres-data</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/var/lib/postgresql/data</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">volumeClaimTemplates</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres-data</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">accessModes</span>: [<span style="color:#e6db74">&#34;ReadWriteOnce&#34;</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">storage</span>: {{ <span style="color:#ae81ff">.Values.db.persistence.size }}</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#75715e"># templates/postgres/service.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">ClusterIP</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">port</span>: {{ <span style="color:#ae81ff">.Values.db.servicePort }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: {{ <span style="color:#ae81ff">.Values.db.port }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja-postgres</span>
</span></span></code></pre></div><h4 id="b-creating-the-vikunja-deployment-service-configmap-and-secret">b. Creating the Vikunja Deployment, Service, ConfigMap, and Secret</h4>
<p>Next, I turned my attention to the Vikunja application itself.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># templates/vikunja/deployment.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: {{ <span style="color:#ae81ff">.Values.vikunja.replicas }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#e6db74">&#34;{{ .Values.vikunja.image.repository }}:{{ .Values.vikunja.image.tag }}&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: {{ <span style="color:#ae81ff">.Values.vikunja.image.pullPolicy }}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">containerPort</span>: {{ <span style="color:#ae81ff">.Values.vikunja.port }}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">envFrom</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">configMapRef</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-config</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">secretRef</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-secret</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: {{ <span style="color:#ae81ff">.Values.vikunja.resources.requests.memory }}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: {{ <span style="color:#ae81ff">.Values.vikunja.resources.requests.cpu }}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: {{ <span style="color:#ae81ff">.Values.vikunja.resources.limits.memory }}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: {{ <span style="color:#ae81ff">.Values.vikunja.resources.limits.cpu }}</span>
</span></span><span style="display:flex;"><span>          {{- <span style="color:#ae81ff">if .Values.vikunja.persistence.enabled }}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-data</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/app/vikunja/files</span>
</span></span><span style="display:flex;"><span>          {{- <span style="color:#ae81ff">end }}</span>
</span></span><span style="display:flex;"><span>{{- <span style="color:#ae81ff">if .Values.vikunja.persistence.enabled }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-data</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">persistentVolumeClaim</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">claimName</span>: <span style="color:#ae81ff">vikunja-data-pvc</span>
</span></span><span style="display:flex;"><span>{{- <span style="color:#ae81ff">end }}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#75715e"># templates/vikunja/service.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">ClusterIP</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">port</span>: {{ <span style="color:#ae81ff">.Values.vikunja.servicePort }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: {{ <span style="color:#ae81ff">.Values.vikunja.port }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span></code></pre></div><p>For managing configuration, I set up a <code>ConfigMap</code> and a <code>Secret</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-config</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_DATABASE_TYPE</span>: {{ <span style="color:#ae81ff">.Values.db.type | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_DATABASE_HOST</span>: {{ <span style="color:#ae81ff">.Values.db.host | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_DATABASE_USER</span>: {{ <span style="color:#ae81ff">.Values.db.user | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_DATABASE_DATABASE</span>: {{ <span style="color:#ae81ff">.Values.db.database | quote }}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_SERVICE_PUBLICURL</span>: {{ <span style="color:#ae81ff">.Values.vikunja.host | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_SERVICE_TIMEZONE</span>: {{ <span style="color:#ae81ff">.Values.vikunja.config.timezone | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_SERVICE_ENABLEREGISTRATION</span>: {{ <span style="color:#ae81ff">.Values.vikunja.config.registrationEnabled | quote }}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_ENABLED</span>: {{ <span style="color:#ae81ff">.Values.smtp.enabled | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_HOST</span>: {{ <span style="color:#ae81ff">.Values.smtp.host | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_PORT</span>: {{ <span style="color:#ae81ff">.Values.smtp.port | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_USERNAME</span>: {{ <span style="color:#ae81ff">.Values.smtp.user | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_FROM_EMAIL</span>: {{ <span style="color:#ae81ff">.Values.smtp.fromEmail | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_SKIP_TLS_VERIFY</span>: {{ <span style="color:#ae81ff">.Values.smtp.skipTLS | quote }}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># templates/vikunja/secret.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">type</span>: <span style="color:#ae81ff">Opaque</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_DATABASE_PASSWORD</span>: {{ <span style="color:#ae81ff">.Values.db.password | b64enc | quote }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VIKUNJA_MAILER_PASSWORD</span>: {{ <span style="color:#ae81ff">.Values.smtp.password | b64enc | quote }}</span>
</span></span></code></pre></div><h4 id="c-adding-persistent-storage">c. Adding Persistent Storage</h4>
<p>Attachments need persistence. I added a PersistentVolumeClaim (PVC) and ensured it was mounted in the Vikunja deployment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># templates/vikunja/pvc.yaml</span>
</span></span><span style="display:flex;"><span>{{- <span style="color:#ae81ff">if .Values.vikunja.persistence.enabled -}}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">PersistentVolumeClaim</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-data-pvc</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">accessModes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ReadWriteOnce</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">storage</span>: {{ <span style="color:#ae81ff">.Values.vikunja.persistence.volumeSize }}</span>
</span></span><span style="display:flex;"><span>{{- <span style="color:#ae81ff">end}}</span>
</span></span></code></pre></div><p>The PVC is then referenced in the Vikunja deployment under <code>volumeMounts</code> as shown earlier.</p>
<h4 id="d-configuring-ingress-with-traefik">d. Configuring Ingress with Traefik</h4>
<p>Since k3s comes with Traefik as the default ingress controller, adding an ingress rule is straightforward:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># templates/vikunja/ingress.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">networking.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Ingress</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja-ingress</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Tell cert-manager to manage the certificate</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cert-manager.io/cluster-issuer</span>: <span style="color:#ae81ff">letsencrypt-prod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Traefik-specific entrypoint</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">traefik.ingress.kubernetes.io/router.entrypoints</span>: <span style="color:#ae81ff">websecure</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">host</span>: {{ <span style="color:#ae81ff">.Values.vikunja.host }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">http</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">pathType</span>: <span style="color:#ae81ff">Prefix</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">backend</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">name</span>: <span style="color:#ae81ff">vikunja</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">port</span>:
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">number</span>: {{ <span style="color:#ae81ff">.Values.vikunja.servicePort }}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tls</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>        - {{ <span style="color:#ae81ff">.Values.vikunja.host }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">vikunja-tls</span>
</span></span></code></pre></div><blockquote>
<p><strong>Caution:</strong> Ensure the domain names, TLS secrets, and ingress configurations correctly reflect your environment.</p></blockquote>
<h4 id="e-final-step-launching-vikunja">e. Final Step: Launching Vikunja</h4>
<p>After thorough linting (<code>helm lint .</code>), templating (<code>helm template .</code>), and testing, I deployed my chart:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm install vikunja ./my-vikunja-chart
</span></span></code></pre></div><p>Monitor the rollout with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get pods,svc -l app<span style="color:#f92672">=</span>vikunja
</span></span></code></pre></div><p>Ensure everything is up and running before celebrating!</p>
<h2 id="4-lessons-learned-and-final-thoughts">4. Lessons Learned and Final Thoughts</h2>
<p>This project was an excellent exercise in planning and iterative development. I continuously refined my Helm chart with a focus on modularity and readability. Here are a few takeaways:</p>
<ul>
<li><strong>Document Everything:</strong> I made sure to have all reference materials ready, reducing guesswork during deployment.</li>
<li><strong>Modular Design:</strong> Separating components (like Postgres and Vikunja) helped maintain clarity.</li>
<li><strong>Iterative Testing:</strong> Helm linting, templating, and incremental tests ensured a smoother rollout.</li>
</ul>
<p>As a DevOps engineer who enjoys solving complex deployment puzzles, I find that a well-documented, step-by-step methodology not only enhances reliability but strengthens my technical story when connecting with headhunters and peers alike.</p>
<h2 id="5-conclusion-and-next-steps">5. Conclusion and Next Steps</h2>
<p>In this blog post, we walked through the deployment of Vikunja on a k3s cluster using a custom Helm chart. By writing clear and modular configurations for Postgres, Vikunja, PVCs, and Ingress, we created a robust setup ready for production-level usage.</p>
<p>As a next step, consider:</p>
<ul>
<li>Scaling the deployment for high availability.</li>
<li>Adding monitoring and logging solutions.</li>
<li>Experimenting with CI/CD integrations like GitHub Actions or ArgoCD.</li>
</ul>
<p>I hope this guide serves as a useful reference for your next Kubernetes project. Happy deploying!</p>
<pre tabindex="0"><code></code></pre>
    </div>
    <div class="post-footer">
      
<div id="comments">
  <h3>Comments</h3>
  <script src="https://utteranc.es/client.js"
          repo="BelKirill/BelKirill.github.io"
          issue-term="pathname"
          label="blog-comment"
          theme="gruvbox-dark"
          crossorigin="anonymous"
          async>
  </script>
</div>

      
    </div>
  </article>

    </main>
  </body>
</html>
